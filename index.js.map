{"version":3,"file":"index.js","sources":["../src/services/filter-service.ts","../src/html-gererators/filter-html-generator.ts","../src/html-gererators/exercises-markup.ts","../src/js/init-filter.ts","../src/main.ts"],"sourcesContent":["import { makeGetRequest } from \"../js/services/request\";\nimport { FilterRequest } from \"../js/types/request.types\";\nimport { FiltersResponse } from \"../js/types/response.types\";\n\nexport async function getFilters(filterRequest: FilterRequest): Promise<FiltersResponse> {\n    const response = await makeGetRequest<FilterRequest, FiltersResponse>(\"filters\", filterRequest);\n    if (!response) {\n        throw new Error(\"Cant' get filters\");\n    }\n    return response;\n}","import { FilterResponse } from \"../js/types/response.types\";\n\nexport function generateFiltersHtml(items: FilterResponse[]) {\n  return items.map(item => `\n          <li class=\"filter-card\" data-filter-type=\"${item.filter}\" data-filter-name=\"${item.name}\">\n            <img src=\"${item.imgURL}\" alt=\"${item.name}\" />\n            <div class=\"filter-info\">\n              <div class=\"filter-name\">${item.name}</div>\n              <div class=\"filter-type\">${item.filter}</div>\n            </div>\n          </li>\n        `)\n    .join('');\n}\n\nexport function generatePaginationHtml(totalPages: number, currentPage: number): string {\n  const pagesToShow: number[] = [];\n\n  const maxVisible = 3;\n  let startPage = Math.max(1, currentPage - 1);\n  let endPage = Math.min(totalPages, startPage + maxVisible - 1);\n\n  if (endPage - startPage + 1 < maxVisible) {\n    startPage = Math.max(1, endPage - maxVisible + 1);\n  }\n\n  for (let page = startPage; page <= endPage; page++) {\n    pagesToShow.push(page);\n  }\n\n  return pagesToShow.map(page => `\n    <li class=\"pagination-page${page === currentPage ? ' active' : ''}\" data-page=\"${page}\">${page}</li>\n  `).join('');\n}\n","import { capitalizeFirstLetter } from '../js/utils/capitalizeFirstLetter';\n\nexport function exercisesMarkup(\n  rating: number,\n  name: string,\n  burnedCalories: string,\n  bodyPart: string,\n  target: string,\n  _id: string\n): string {\n  const capitalizedName = capitalizeFirstLetter(name);\n  const iconId =\n    bodyPart.toLowerCase() === 'cardio' ? 'running' : 'fluent-food';\n\n  return `\n<li class=\"exercises-category-tile-item\">\n  <div class=\"exercises-category-tile-top\">\n    <div class=\"exercises-category-tile-workout-wrapper\">\n      <span class=\"exercises-category-tile-badge\">\n        WORKOUT\n      </span>\n      <div class=\"exercises-category-tile-rating-wrapper\">\n        <span class=\"exercises-category-tile-rating\">${rating.toFixed(1)}</span>\n        <svg class=\"exercises-category-tile-star-icon\" width=\"16\" height=\"16\">\n          <use href=\"./../img/sprite.svg#Star\"></use>\n        </svg>\n      </div>\n    </div>\n    <button class=\"exercises-category-tile-button\" data-id=\"${_id}\">\n      Start\n      <svg class=\"exercises-category-tile-arrow-icon\" width=\"16\" height=\"16\">\n        <use href=\"./../img/sprite.svg#arrow-right\"></use>\n      </svg>\n    </button>\n  </div>\n  <div class=\"exercises-category-tile-middle\">\n    <div class=\"exercises-category-tile-man-icon-container\">\n      <svg class=\"exercises-category-tile-man-icon\" width=\"16\" height=\"16\">\n        <use href=\"./../img/sprite.svg#${iconId}\"></use>\n      </svg>\n    </div>\n    <h3 class=\"exercises-category-tile-name\">${capitalizedName}</h3>\n  </div>\n  <ul class=\"exercises-category-tile-bottom\">\n      <li class=\"exercises-category-tile-bottom-item\">\n        <span class=\"exercises-category-tile-bottom-title\">Burned calories:</span>\n        <span class=\"exercises-category-tile-bottom-value\">${burnedCalories}</span>\n      </li>\n      <li class=\"exercises-category-tile-bottom-item\">\n        <span class=\"exercises-category-tile-bottom-title\">Body part:</span>\n        <span class=\"exercises-category-tile-bottom-value\">${bodyPart}</span>\n      </li>\n      <li class=\"exercises-category-tile-bottom-item\">\n        <span class=\"exercises-category-tile-bottom-title\">Target:</span>\n        <span class=\"exercises-category-tile-bottom-value\">${target}</span>\n      </li>\n  </ul>\n</li>`;\n}\n","import { getFilters } from '../services/filter-service';\nimport { generateFiltersHtml, generatePaginationHtml } from '../html-gererators/filter-html-generator';\nimport { showErrorMessage, showInfoMessage } from './utils/toasts';\nimport { FilterType } from './types/general.types';\nimport { exercisesMarkup } from '../html-gererators/exercises-markup';\nimport { ExercisesRequest } from './types/request.types';\nimport { ExercisesResponse } from './types/response.types';\nimport { getExercises } from '../services/ exercises-service';\n\nexport function initFilters(): void {\n  const filtersOutputContainer = document.querySelector('.filters-output') as HTMLElement;\n  const tabsContainer = document.querySelector('.filter-tabs') as HTMLElement;\n  const paginationContainer = document.querySelector('.filter-pagination') as HTMLElement;\n  const exercisesListContainer = document.querySelector('.exercises-list') as HTMLElement;\n  const exercisesPaginationContainer = document.querySelector('.exercises-pagination') as HTMLElement;\n  const exercisesFiltersForm = document.querySelector('.exercises-filters-form') as HTMLFormElement;\n  const subHeaderContainer = document.querySelector('.exercises-subheader-container') as HTMLElement;\n\n  if (!filtersOutputContainer) throw new Error('Can\\'t find .filters-output');\n  if (!tabsContainer) throw new Error('Can\\'t find .filter-tabs');\n  if (!paginationContainer) throw new Error('Can\\'t find .filter-pagination');\n  if (!exercisesFiltersForm) throw new Error('Can\\'t find .exercises-filters-form');\n  if (!subHeaderContainer) throw new Error('Can\\'t find .exercises-subheader-container');\n\n  let currentFilter = (tabsContainer.querySelector('.active') as HTMLElement)?.dataset.filter as FilterType;\n  let currentPage = 1;\n  let currentKeyword = \"\";\n  let currentFilterKey: string;\n  let currentFilterName: string;\n\n  exercisesFiltersForm.addEventListener('submit', (e: Event) => {\n    e.preventDefault();\n\n    const formData = new FormData(exercisesFiltersForm);\n    currentKeyword = formData.get('keyword') as string;\n\n    loadExercises(currentFilterKey, currentFilterName, currentPage);\n  });\n\n  function loadFilters(filter: FilterType, page: number): void {\n    const limit = 12;\n    filtersOutputContainer.innerHTML = '';\n    paginationContainer.innerHTML = '';\n\n    getFilters({ filter, page, limit })\n      .then(response => {\n        filtersOutputContainer.innerHTML = generateFiltersHtml(response.results);\n        paginationContainer.innerHTML = generatePaginationHtml(response.totalPages, page);\n        filtersOutputContainer.style.display = 'flex';\n        paginationContainer.style.display = 'flex';\n\n        setExercisesSubheader(null);\n\n        exercisesListContainer.style.display = 'none';\n        exercisesPaginationContainer.style.display = 'none';\n        exercisesFiltersForm.style.display = 'none';\n        exercisesFiltersForm.reset();\n        currentKeyword = \"\";\n\n        attachFilterCardClickHandlers();\n      })\n      .catch(error => showErrorMessage({\n        title: 'Error',\n        message: error.message,\n        position: 'topRight',\n      }));\n  }\n\n  async function loadExercises(\n    filterKey: string,\n    filterValue: string,\n    page: number,\n  ): Promise<void> {\n    if (!exercisesListContainer || !exercisesPaginationContainer) return;\n    const limit = 10;\n    const requestParams: Partial<ExercisesRequest> = {\n      [filterKey]: filterValue,\n      page,\n      limit,\n      keyword: currentKeyword,\n    };\n    try {\n      const response: ExercisesResponse = await getExercises(requestParams);\n      const markup = response.results\n        .map(ex =>\n          exercisesMarkup(\n            ex.rating,\n            ex.name,\n            `${ex.burnedCalories} kcal`,\n            ex.bodyPart,\n            ex.target,\n            ex._id,\n          ),\n        )\n        .join('');\n      exercisesListContainer.innerHTML = markup;\n      exercisesPaginationContainer.innerHTML = generatePaginationHtml(\n        response.totalPages,\n        response.page,\n      );\n\n      exercisesFiltersForm.style.display = 'flex';\n      exercisesListContainer.style.display = 'flex';\n      exercisesPaginationContainer.style.display = 'flex';\n\n      attachExercisesPaginationHandlers(filterKey, filterValue);\n\n      if (response.results.length === 0) {\n        showInfoMessage({\n          title: \"\",\n          message: \" No excersies found\",\n          position: 'topRight'\n        });\n      }\n    } catch (error: any) {\n      showErrorMessage({\n        title: 'Error',\n        message: error?.message || 'Failed to load exercises',\n        position: 'topRight',\n      });\n    }\n  }\n\n  function attachFilterCardClickHandlers(): void {\n    const filterCards = filtersOutputContainer!.querySelectorAll('.filter-card');\n    filterCards.forEach(card => {\n      card.addEventListener('click', () => {\n        const filterType = card.getAttribute('data-filter-type') as string;\n        const filterName = card.getAttribute('data-filter-name') as string;\n        if (!filterType || !filterName) return;\n        currentPage = 1;\n\n        let key: string;\n        if (filterType === 'Muscles') {\n          key = 'muscles';\n        } else if (filterType === 'Body parts') {\n          key = 'bodypart';\n        } else if (filterType === 'Equipment') {\n          key = 'equipment';\n        } else {\n          return;\n        }\n\n        if (filtersOutputContainer && paginationContainer) {\n          filtersOutputContainer.innerHTML = '';\n          filtersOutputContainer.style.display = 'none';\n          paginationContainer.innerHTML = '';\n          paginationContainer.style.display = 'none';\n        }\n\n        setExercisesSubheader(filterName);\n\n        currentFilterKey = key;\n        currentFilterName = filterName.toLowerCase();\n\n        loadExercises(key, currentFilterName, currentPage);\n      });\n    });\n  }\n\n  function setExercisesSubheader(subheader: string | null) {\n    subHeaderContainer.innerHTML = subheader\n      ? ` / <span class=\"exercises-subheader\">${subheader}</span>`\n      : \"\";\n  }\n\n  function attachExercisesPaginationHandlers(\n    filterKey: string,\n    filterValue: string\n  ): void {\n    const paginationPages =\n      exercisesPaginationContainer!.querySelectorAll('.pagination-page');\n    paginationPages.forEach(pageEl => {\n      pageEl.addEventListener('click', () => {\n        const newPage = Number(pageEl.getAttribute('data-page'));\n        if (!newPage || newPage === currentPage) return;\n        currentPage = newPage;\n        loadExercises(filterKey, filterValue, currentPage);\n      });\n    });\n  }\n\n  tabsContainer.addEventListener('click', (event) => {\n    const target = event.target as HTMLElement;\n\n    if (target.tagName.toLowerCase() !== 'button') return;\n\n    const newFilter = target.dataset.filter as FilterType;\n    if (!newFilter || newFilter === currentFilter) return;\n\n    tabsContainer.querySelectorAll('button').forEach(t => t.classList.remove('active'));\n    target.classList.add('active');\n\n    currentFilter = newFilter;\n    currentPage = 1;\n\n    loadFilters(currentFilter, currentPage);\n  });\n\n  paginationContainer.addEventListener('click', (event) => {\n    const target = event.target as HTMLElement;\n    if (target.tagName.toLowerCase() !== 'li') return;\n\n    const newPage = Number(target.dataset.page);\n    if (!newPage || newPage === currentPage) return;\n\n    currentPage = newPage;\n    loadFilters(currentFilter, currentPage);\n  });\n\n  loadFilters(currentFilter, currentPage);\n}","import { initFilters } from './js/init-filter';\nimport { fetchQuote } from './js/quote';\nimport { initFooter } from './js/init-footer';\nimport { initExerciseEvents } from './js/modal-controller';\n\ninitFilters();\nfetchQuote();\ninitFooter();\n\nconst exercisesContainer = document.querySelector('.exercises-content');\nif (exercisesContainer instanceof HTMLElement) {\n  initExerciseEvents(exercisesContainer);\n}\n"],"names":["getFilters","filterRequest","response","makeGetRequest","generateFiltersHtml","items","item","generatePaginationHtml","totalPages","currentPage","pagesToShow","startPage","endPage","page","exercisesMarkup","rating","name","burnedCalories","bodyPart","target","_id","capitalizedName","capitalizeFirstLetter","iconId","initFilters","filtersOutputContainer","tabsContainer","paginationContainer","exercisesListContainer","exercisesPaginationContainer","exercisesFiltersForm","subHeaderContainer","currentFilter","_a","currentKeyword","currentFilterKey","currentFilterName","e","loadExercises","loadFilters","filter","setExercisesSubheader","attachFilterCardClickHandlers","error","showErrorMessage","filterKey","filterValue","limit","requestParams","getExercises","markup","ex","attachExercisesPaginationHandlers","showInfoMessage","card","filterType","filterName","key","subheader","pageEl","newPage","event","newFilter","t","fetchQuote","initFooter","exercisesContainer","initExerciseEvents"],"mappings":"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"}