import{i as f,a as g}from"./vendor-BAoYjrW1.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".burger"),t=document.querySelector(".mobile-menu"),o=document.querySelector(".mobile-menu__close"),n=document.querySelector(".mobile-menu__overlay");if(!e||!t||!o||!n)return;const r=()=>{t.classList.add("mobile-menu--open")},s=()=>{t.classList.remove("mobile-menu--open")};e.addEventListener("click",r),o.addEventListener("click",s),n.addEventListener("click",s);const a=document.querySelector(".main-nav .home-link"),i=document.querySelector(".main-nav .favorites-link"),p=()=>{const u=window.location.pathname;a&&i&&(a.classList.remove("active-oval"),i.classList.remove("active-oval"),u==="/index.html"||u==="/"?a.classList.add("active-oval"):u==="/favorites.html"&&i.classList.add("active-oval"))};p(),window.addEventListener("popstate",p)});const y="https://your-energy.b.goit.study/api/",c=({title:e,message:t,position:o,...n}={title:"Error",message:"Something went wrong. Please try again later.",position:"topRight"})=>{f.error({title:e,message:t,position:o,...n})},L=({title:e,message:t,position:o,...n}={title:"Success",message:"Operation completed successfully.",position:"topRight"})=>{f.success({title:e,message:t,position:o,...n})},R=({title:e,message:t,position:o,...n})=>{f.info({title:e,message:t,position:o,...n})};function h(){const e=document.getElementById("loader");e&&e.classList.remove("hidden")}function E(){const e=document.getElementById("loader");e&&e.classList.add("hidden")}const S=async(e,t)=>{try{h();const{data:o}=await g.get(`${y}${e}`,{params:t});return o}catch(o){console.error(o),c()}finally{E()}},b=async(e,t)=>{try{h();const{data:o}=await g.post(`${y}${e}`,t);return o}catch(o){console.error(o),c()}finally{E()}};async function D(){const e=await S("quote");if(!e)throw new Error("Cant' get quote");return e}const d=document.getElementById("quote-text"),m=document.getElementById("quote-author"),w="quote",v="quoteDate";function q(){return new Date().toISOString().split("T")[0]}function O(){const e=localStorage.getItem(w),t=localStorage.getItem(v),o=q();if(e&&t===o)try{return JSON.parse(e)}catch(n){return console.error("Error parsing stored quote:",n),null}return null}function l(e,t){if(!d||!m)throw new Error("Can't find quote elements");d.textContent=e,m.textContent=t}function I(e,t){const o=JSON.stringify({quote:e,author:t}),n=q();localStorage.setItem(w,o),localStorage.setItem(v,n)}async function _(){try{const e=await D();return e&&e.quote?{quote:e.quote,author:e.author}:null}catch(e){return console.error("Error fetching quote:",e),null}}async function Q(){if(!d||!m)throw new Error("Can't find quote elements");const e=O();if(e){l(e.quote,e.author);return}const t=await _();t?(I(t.quote,t.author),l(t.quote,t.author)):l("Failed to fetch quote.","")}function M(){const e=document.getElementById("subscription-form"),t=document.querySelector(".footer-year p");if(t&&(t.textContent=`Â©${new Date().getFullYear()}`),!e)return;e.addEventListener("submit",o);async function o(r){r.preventDefault();const a=new FormData(e).get("email");if(!a||!n(a)){c({title:"Error",message:"Please enter a valid email address",position:"topRight"});return}try{if(await b("subscription",{email:a})===void 0)throw new Error("Subscription failed");e.reset(),L({title:"Success",message:"Thank you for subscribing!",position:"topRight"})}catch{c({title:"Error",message:"Failed to subscribe. Please try again later.",position:"topRight"})}}function n(r){return/^\w+(\.\w+)*@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/.test(r)}}export{y as Y,c as a,Q as f,M as i,S as m,R as s};
//# sourceMappingURL=init-footer-CVCRW4MC.js.map
